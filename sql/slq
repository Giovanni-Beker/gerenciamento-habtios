

create table public.habitos (
    id bigint generated by default as identity primary key,
    nome text,
    categoria text,
    descricao text,
    meta_diaria text,
    horario_ideal text,
    dias_semanas text,
    created_at timestamptz default timezone('utc'::text, now()),
    atualizado_at timestamp
);

create table public.historico_habitos (
    id bigint generated by default as identity primary key,
    habito_id int8 references public.habitos(id) on delete cascade,
    data timestamptz,
    realizado bool,
    usuario_id uuid,
    atualizado_em timestamptz default timezone('utc'::text, now())
);



Tabela historico_habitos

create policy "Usuarios veem apenas seus dados"
on historico_habitos
for select
using ( auth.uid() = usuario_id );

create policy "Usuarios inserem apenas seus dados"
on historico_habitos
for insert
with check ( auth.uid() = usuario_id );

create policy "Usuarios atualizam apenas seus dados"
on historico_habitos
for update
using ( auth.uid() = usuario_id );

create policy "Usuarios deletam apenas seus dados"
on historico_habitos
for delete
using ( auth.uid() = usuario_id );


Tabela habitos

create policy "Usuarios veem apenas seus dados"
on habitos
for select
using ( auth.uid() = usuario_id );

create policy "Usuarios inserem apenas seus dados"
on habitos
for insert
with check ( auth.uid() = usuario_id );

create policy "Usuarios atualizam apenas seus dados"
on habitos
for update
using ( auth.uid() = usuario_id );

create policy "Usuarios deletam apenas seus dados"
on habitos
for delete
using ( auth.uid() = usuario_id );




